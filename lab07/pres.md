# Российский Университет Дружбы Народов

## Факультет физико-математических и естественных наук

### Кафедра теории вероятностей и кибербезопасности

---

# ОТЧЁТ

### ПО ЛАБОРАТОРНОЙ РАБОТЕ №9

**Дисциплина:** Администрирование локальных сетей  
**Студент:** Махорин Иван Сергеевич  
**Студ. билет №:** 1032211221  
**Группа:** НПИбд-02-21  

---

### Москва, 2024 г.

---

## Цель работы

Изучить возможности протокола STP и его модификаций по обеспечению отказоустойчивости сети, агрегированию интерфейсов и перераспределению нагрузки между ними.

---

## Выполнение работы

1. Откроем проект с названием `lab_PT-08.pkt` и сохраним под названием `lab_PT-09.pkt`. После чего откроем его для дальнейшего редактирования.

   ![Рис. 1.1. Открытие проекта lab_PT-09.pkt.](image_placeholder_1)

2. Сформируем резервное соединение между коммутаторами `msk-donskaya-ismakhorin-sw-1` и `msk-donskaya-ismakhorin-sw-3`. Заменим соединение между коммутаторами `msk-donskaya-ismakhorin-sw-1 (Gig0/2)` и `msk-donskaya-ismakhorin-sw-4 (Gig0/1)` на соединение между `msk-donskaya-ismakhorin-sw-1 (Gig0/2)` и `msk-donskaya-ismakhorin-sw-3 (Gig0/2)`.

   ![Рис. 1.2. Формирование резервного соединения между коммутаторами.](image_placeholder_2)

3. Настроим порт на интерфейсе `Gig0/2` коммутатора `msk-donskaya-ismakhorin-sw-3` как транковый.

   ![Рис. 1.3. Настройка порта в транковом режиме.](image_placeholder_3)

4. Соединение между коммутаторами `msk-donskaya-ismakhorin-sw-1` и `msk-donskaya-ismakhorin-sw-4` сделаем через интерфейсы `Fa0/23`, активировав их в транковом режиме.

   ![Рис. 1.4. Соединение через интерфейсы Fa0/23.](image_placeholder_4)  
   ![Рис. 1.5. Активация транкового режима на `msk-donskaya-ismakhorin-sw-1`.](image_placeholder_5)  
   ![Рис. 1.6. Активация транкового режима на `msk-donskaya-ismakhorin-sw-4`.](image_placeholder_6)

5. С оконечного устройства `dk-donskaya-1` пропингуем серверы `mail` и `web`. В режиме симуляции проследим движение пакетов ICMP и убедимся, что они проходят через коммутатор `msk-donskaya-ismakhorin-sw-2`.

   ![Рис. 1.7. Проверка командой ping.](image_placeholder_7)  
   ![Рис. 1.8. Отслеживание пакетов ICMP для web.](image_placeholder_8)  
   ![Рис. 1.9. Отслеживание пакетов ICMP для mail.](image_placeholder_9)

6. На коммутаторе `msk-donskaya-ismakhorin-sw-2` посмотрим состояние протокола STP для VLAN 3, удостоверившись, что это устройство является корневым.

   ![Рис. 1.10. Состояние протокола STP.](image_placeholder_10)

7. Настроим `msk-donskaya-ismakhorin-sw-1` как корневой коммутатор STP.

   ![Рис. 1.11. Настройка корневого коммутатора.](image_placeholder_11)

8. Проверим путь ICMP-пакетов от хоста `dk-donskaya-1` до серверов `mail` и `web` через разные коммутаторы.

   ![Рис. 1.12. Путь к web.](image_placeholder_12)  
   ![Рис. 1.13. Путь к mail.](image_placeholder_13)

9. Настроим режим Portfast на интерфейсах, к которым подключены сервера.

   ![Рис. 1.14. Настройка Portfast на `msk-donskaya-ismakhorin-sw-2`.](image_placeholder_14)  
   ![Рис. 1.15. Настройка Portfast на `msk-donskaya-ismakhorin-sw-3`.](image_placeholder_15)

10. Изучим отказоустойчивость STP, запустив команду `ping -n 1000 mail.donskaya.rudn.ru`, и отключим интерфейс для проверки восстановления соединения.

    ![Рис. 1.16. Проверка отказоустойчивости STP.](image_placeholder_16)  
    ![Рис. 1.17. Время восстановления соединения.](image_placeholder_17)

11. Переключим коммутаторы в режим Rapid PVST+ и изучим его отказоустойчивость.

    ![Рис. 1.18. Режим Rapid PVST+.](image_placeholder_18)  
    ![Рис. 1.19. Отказоустойчивость Rapid PVST+.](image_placeholder_19)  
    ![Рис. 1.20. Время восстановления.](image_placeholder_20)

12. Сформируем агрегированное соединение интерфейсов `Fa0/20 – Fa0/23` между коммутаторами `msk-donskaya-ismakhorin-sw-1` и `msk-ismakhorin-donskaya-sw-4`.

    ![Рис. 1.21. Агрегация интерфейсов.](image_placeholder_21)  
    ![Рис. 1.22. Агрегация интерфейсов.](image_placeholder_22)  
    ![Рис. 1.23. Агрегация интерфейсов.](image_placeholder_23)

---

## Вывод

В ходе выполнения лабораторной работы мы изучили возможности протокола STP и его модификаций по обеспечению отказоустойчивости сети, агрегированию интерфейсов и перераспределению нагрузки между ними.

---

## Ответы на контрольные вопросы

1. **Какую информацию можно получить, воспользовавшись командой определения состояния протокола STP для VLAN?**
   - **VLAN:** Номер VLAN.
   - **STP:** Тип протокола.
   - **Root ID/Bridge ID:** Ближайший коммутатор/Текущий коммутатор.
   - **Priority:** Приоритет.
   - **Address:** MAC-адрес.
   - **Cost:** "Затраты" до этого коммутатора.
   - **Port:** Порт.
   - **Hello Time/Max Age/Forward Delay/Aging Time:** Время работы STP и свойства портов.

2. **Как узнать режим работы STP или Rapid PVST+?**
   - Команда: `sh ru`

3. **Для чего нужен режим Portfast?**
   - Позволяет сразу включать выделенные порты, поскольку они не участвуют во включении STP.

4. **Принцип работы агрегированного интерфейса:**
   - Увеличение пропускной способности за счёт объединения каналов. Перенаправление трафика при обрыве одного из каналов.

5. **Отличия LACP, PAgP и статического агрегирования:**
   - **LACP:** Общий стандарт IEEE.
   - **PAgP:** Локальный протокол Cisco.
   - **Статическое агрегирование:** Без обязательной настройки с обеих сторон.

6. **Как узнать состояние агрегированного канала EtherChannel?**
   - Команда: `show etherchannel`
